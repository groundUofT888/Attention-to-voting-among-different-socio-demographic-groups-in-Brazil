---
title: "term paper_2"
author: "Hao Wang  Siqi Fei Xuecheng Gao"
thanks: "Code and data are available at: https://github.com/groundUofT888/Term-Paper-2.git ; Replication on Social Science Reproduction platform available at: www.aeaweb.org/articles?id=10.1257/app.20210529"
date: "February 12, 2024"
date-format: long
format: 
  pdf: 
    include-in-header: 
      text: |
        \usepackage{lscape}
        \newcommand{\blandscape}{\begin{landscape}}
        \newcommand{\elandscape}{\end{landscape}}
    documentclass: article
    geometry: margin = 1in
    abstract: " "
    number-sections: true
output: 
  bookdown::pdf_document2
toc: false
fig_caption: yes 
nocite: '@*'
bibliography: references.bib
---

```{r setup}
#| echo: false
#| message: false
#| warning: false
# install.packages('readr')
install.packages("here")
install.packages("dplyr") 
install.packages("tidyverse")
installed.packages("ggplot2")
# install.packages("knitr")


library(here)
library(dplyr)
library(tidyverse)
library(knitr)
library(rdrobust)
library(ggplot2)

data_path <- here("outputs", "edited_data", "election_cleaned.csv")
election <- read.csv(data_path)
```

# Introduction

In 2022, Brazil's presidential election broke new grounds with an unprecedented turnout of over 150 million voters, capturing the attention of national and international media. The world had seen not just about the political tactics of the candidates, but also the public's vested interest in how these elections could shape their day-to-day lives. This paper aims to study the influence of Brazil's electoral system on three critical socio-economic indicators: income level, unemployment rate and educational resources. With a comprehensive look at recent data and trends, we will investigate how the details of voting and representation create a chain reaction throughout the economy, affecting everything from job opportunities to the quality of education. By collecting together statistical analysis with real-world implications, we'll provide a clearer picture of the electoral system's impact on the Brazilian populace and discuss the broader implications of these findings on social equality and economic stability.

# Data

## Source

## Methodology

This paper will replicate the survey data that was originally collected by Moya Chin, AMERICAN ECONOMIC JOURNAL: APPLIED ECONOMICS VOL. 15, NO. 3, JULY 2023 (pp. 183-209).

It uses datasets constructed from four data sources: 1) Brazil municipal election data (Tribunal Superior Eleitoral, 1996-2016); 2) Brazil demographic censuses (Instituto Brasileiro de Geografia e Estatística, 1980, 1991, 2000, 2010); 3) Brazil school census (Ministério da Educação, 1997-2016); and 4) nighttime lights (National Oceanic and Atmospheric Administration, 1997-2016a,-).

R[@citeR] is the language and environment used for this analysis,supported by the robust features of Posit Cloud as our primary integrated development environment (IDE). Library includes `ggplot2`[@ggplot2], `here`[@here].

Git(version 2.39.2) is used as version control.

## Features

这里需要被使用到的Data/文件/数据的名字，参考教授example里的2022年第一个例子，2.2.1部分 \# Results
\renewcommand{\arraystretch}{2}
# Result

Our statistical analysis began with a computation of the sample size which represents the population of Brazilians in 2022 election, with a population size of 203.1 million. We determined the sample size as 33188 in this study, ensuring the analysis result would be within an acceptable margin of error. This sample size was substantiated by Quota sampling, ensuring the representativeness of our data set.



```{r}
#| label: figl-terc
#| fig-cap: "Income per capita"
#| echo: false
#| message: false
#| warning: false

p <- ggplot(data = election, aes(x = tse_code, y = inc_post)) +
  geom_point(color = "blue") +  # Scatter plot points
  labs(x = "Number of registered voters", y = "Income per capita")
p + geom_smooth(method = "lm", color = "red")
```


For the above [@fig-terc] the trend line indicates a slight positive correlation between the number of registered voters and income per capita. This could suggest that in areas with more registered voters, there may be a slightly higher income per capita.

```{r}
#| label: fig-excess
#| fig-cap: "Low income rate"
#| echo: false
#| message: false
#| warning: false

cutoff_value <-60000
election$cutoff_side <- ifelse(election$tse_code < cutoff_value, "Below", "Above")

p <- ggplot(data = election, aes(x = tse_code, y = inc_0_50_post)) +
  geom_point(color = "blue") +  # Scatter plot points
  labs(x = "Number of registered voters", y = "Low income rate") +
  geom_vline(xintercept = cutoff_value, linetype = "dashed", color = "black") + # Cutoff line
  geom_smooth(data = subset(election, tse_code < cutoff_value), 
              aes(x = tse_code, y = inc_0_50_post), 
              method = "lm", color = "red") + 
  geom_smooth(data = subset(election, tse_code >= cutoff_value), 
              aes(x = tse_code, y = inc_0_50_post), 
              method = "lm", color = "yellow") 
p 

```

The plot [@fig-excess] appears to show a slight negative correlation, as indicated by the downward trend line. This suggests that as the number of registered voters increases, the low-income rate decreases slightly. However, the wide spread of the data points indicates that many other factors likely influence the low-income rate beyond just the number of registered voters.


```{r}
#| label: fig-ecoil
#| fig-cap: Unemployment rate
#| echo: false
#| message: false
#| warning: false

p <- ggplot(data = election, aes(x = tse_code, y = unempl_post)) +
  geom_point(color = "blue") +  # Scatter plot points
  labs(x = "Number of registered voters", y = "Unemployment rate")
p + geom_smooth(method = "lm", color = "red")
```

Analyzing the [@fig-ecoil], there are noticeable differences. The first plot shows a vast spread of unemployment rates across varying numbers of registered voters, with a trend line that remains relatively flat. This suggests there isn't a strong or clear correlation between the number of registered voters and the unemployment rate within the represented data set.

-drop out率的分析

三个汇总一下

table pie chart
```{r}
#| label: fig-statements
#| fig-cap: "University degree"
#| echo: false
#| message: false
#| warning: false

p <- ggplot(data = election, aes(x = tse_code, y = edu_univ)) +
  geom_point(color = "blue") +  # Scatter plot points
  labs(x = "Number of registered voters", y = "University degree \n (fraction")
p + geom_smooth(method = "lm", color = "red")
```

\renewcommand{\arraystretch}{1.5}

\newpage

\blandscape

```{r}
#| label: tbl-hatemodel
#| tbl-cap: "Tabulated weights of linear regression models 1 through 6 using ordinary least squares. In parentheses are the standard errors. Asterisks denote ranges of p-values as described in the table footer."
#| echo: false
#| message: false
#| warning: false


```

\elandscape

```{r, message=FALSE, message=FALSE, echo=FALSE, include=FALSE}
#| label: draft code (not used)

```

# Discussion

## Findings

## Canadian Relevance: Case Study on Alberta's population ratios, dating markets and anti-refugee sentiments

## Ethical Implications

## Accounting for Bias

## Limitations

## Future Research

\clearpage

# References {.unnumbered}
